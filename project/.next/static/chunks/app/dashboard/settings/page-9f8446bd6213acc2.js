(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{285:(e,s,a)=>{"use strict";a.d(s,{$:()=>c});var r=a(5155),t=a(2115),l=a(9708),i=a(2085),n=a(9434);let d=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,s)=>{let{className:a,variant:t,size:i,asChild:c=!1,...o}=e,u=c?l.DX:"button";return(0,r.jsx)(u,{className:(0,n.cn)(d({variant:t,size:i,className:a})),ref:s,...o})});c.displayName="Button"},334:(e,s,a)=>{Promise.resolve().then(a.bind(a,7038))},646:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1007:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1243:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2085:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var r=a(2596);let t=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=r.$,i=(e,s)=>a=>{var r;if((null==s?void 0:s.variants)==null)return l(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:i,defaultVariants:n}=s,d=Object.keys(i).map(e=>{let s=null==a?void 0:a[e],r=null==n?void 0:n[e];if(null===s)return null;let l=t(s)||t(r);return i[e][l]}),c=a&&Object.entries(a).reduce((e,s)=>{let[a,r]=s;return void 0===r||(e[a]=r),e},{});return l(e,d,null==s||null==(r=s.compoundVariants)?void 0:r.reduce((e,s)=>{let{class:a,className:r,...t}=s;return Object.entries(t).every(e=>{let[s,a]=e;return Array.isArray(a)?a.includes({...n,...c}[s]):({...n,...c})[s]===a})?[...e,a,r]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},2523:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var r=a(5155),t=a(2115),l=a(9434);let i=t.forwardRef((e,s)=>{let{className:a,type:t,...i}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"},3109:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},5525:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5868:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(9946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n});var r=a(5155),t=a(2115),l=a(9434);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});i.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},7038:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var r=a(5155),t=a(2115),l=a(6695),i=a(285),n=a(2523),d=a(8979),c=a(8879),o=a(1007),u=a(9946);let m=(0,u.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var h=a(646),p=a(5525),x=a(5868);let f=(0,u.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),y=(0,u.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var j=a(3109),v=a(1243);function g(){let{user:e,loading:s,error:a,refreshUser:u}=function(){let{isLoaded:e,isSignedIn:s,user:a}=(0,c.Jd)(),[r,l]=(0,t.useState)(null),[i,n]=(0,t.useState)(!1),[d,o]=(0,t.useState)(null),u=(0,t.useCallback)(async()=>{if(s&&a){n(!0),o(null);try{let e=await fetch("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to sync user");let s=await e.json();l(s.data)}catch(e){o(e instanceof Error?e.message:"Failed to sync user"),console.error("User sync error:",e)}finally{n(!1)}}},[s,a]),m=async()=>{if(s&&a){n(!0),o(null);try{let e=await fetch("/api/auth/profile",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch user profile");let s=await e.json();l(s.data)}catch(e){o(e instanceof Error?e.message:"Failed to fetch user profile"),console.error("User fetch error:",e)}finally{n(!1)}}};return(0,t.useEffect)(()=>{e&&s&&a?u():e&&!s&&(l(null),o(null))},[e,s,a,u]),{user:r,loading:i,error:d,syncUser:u,refreshUser:m}}(),[g,N]=(0,t.useState)({name:"",email:""}),[b,w]=(0,t.useState)({totalCapital:1e5,maxDailyDrawdownPct:2,maxConsecutiveLosses:3,riskPerTradePct:1}),[k,A]=(0,t.useState)(!1),[C,P]=(0,t.useState)(!1),[F,D]=(0,t.useState)(!0),[T,R]=(0,t.useState)(!1),[M,S]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&N({name:e.name||"",email:e.email||""})},[e]),(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/settings/risk-profile");if(e.ok){let s=await e.json();w(s.data)}}catch(e){console.error("Error loading risk profile:",e)}finally{D(!1)}})()},[]);let E=(e,s)=>{N(a=>({...a,[e]:s}))},Z=(e,s)=>{w(a=>({...a,[e]:s}))},J=async()=>{A(!0),S(!1);try{let e=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(e.ok)S(!0),await u(),setTimeout(()=>S(!1),3e3);else{let s=await e.json();console.error("Error saving user profile:",s)}}catch(e){console.error("Error saving user profile:",e)}finally{A(!1)}},B=async()=>{P(!0),R(!1);try{let e=await fetch("/api/settings/risk-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(e.ok)R(!0),setTimeout(()=>R(!1),3e3);else{let s=await e.json();console.error("Error saving risk profile:",s)}}catch(e){console.error("Error saving risk profile:",e)}finally{P(!1)}};return s||F?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"Loading settings..."})}):a?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-destructive mb-2",children:"Error loading user data"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Settings"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your account and preferences"})]})}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-5 w-5"}),"Profile"]}),(0,r.jsx)(l.BT,{children:"Manage your account information and preferences"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d.J,{htmlFor:"name",children:"Name"}),(0,r.jsx)(n.p,{id:"name",placeholder:"Your name",value:g.name,onChange:e=>E("name",e.target.value)})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(d.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(n.p,{id:"email",type:"email",placeholder:"your@email.com",value:g.email,onChange:e=>E("email",e.target.value)})]})]}),(0,r.jsx)(i.$,{className:"w-full",onClick:J,disabled:k,children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{className:"h-4 w-4 mr-2"}),"Update Profile"]})}),M&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"Profile updated successfully!"]})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"h-5 w-5"}),"Risk Profile"]}),(0,r.jsx)(l.BT,{children:"Configure your trading risk parameters for Guardian AI"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"totalCapital",children:"Total Capital"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(x.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,r.jsx)(n.p,{id:"totalCapital",type:"number",value:b.totalCapital,onChange:e=>Z("totalCapital",parseFloat(e.target.value)||0),className:"pl-10"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"maxDailyDrawdown",children:"Max Daily Drawdown (%)"}),(0,r.jsx)(n.p,{id:"maxDailyDrawdown",type:"number",step:"0.1",value:b.maxDailyDrawdownPct,onChange:e=>Z("maxDailyDrawdownPct",parseFloat(e.target.value)||0)})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"maxConsecutiveLosses",children:"Max Consecutive Losses"}),(0,r.jsx)(n.p,{id:"maxConsecutiveLosses",type:"number",value:b.maxConsecutiveLosses,onChange:e=>Z("maxConsecutiveLosses",parseInt(e.target.value)||0)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"riskPerTrade",children:"Risk Per Trade (%)"}),(0,r.jsx)(n.p,{id:"riskPerTrade",type:"number",step:"0.1",value:b.riskPerTradePct,onChange:e=>Z("riskPerTradePct",parseFloat(e.target.value)||0)})]})]}),(0,r.jsx)(i.$,{className:"w-full",onClick:B,disabled:C,children:C?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m,{className:"h-4 w-4 mr-2"}),"Save Risk Profile"]})}),T&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[(0,r.jsx)(h.A,{className:"h-4 w-4"}),"Risk profile saved successfully!"]})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(f,{className:"h-5 w-5"}),"Notifications"]}),(0,r.jsx)(l.BT,{children:"Configure your notification preferences"})]}),(0,r.jsx)(l.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d.J,{htmlFor:"riskAlerts",children:"Risk Alerts"}),(0,r.jsx)("input",{type:"checkbox",id:"riskAlerts",defaultChecked:!0,className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d.J,{htmlFor:"dailyDigest",children:"Daily Performance Digest"}),(0,r.jsx)("input",{type:"checkbox",id:"dailyDigest",defaultChecked:!0,className:"rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(d.J,{htmlFor:"weeklyReport",children:"Weekly Analytics Report"}),(0,r.jsx)("input",{type:"checkbox",id:"weeklyReport",className:"rounded"})]})]})})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(y,{className:"h-5 w-5"}),"Data Management"]}),(0,r.jsx)(l.BT,{children:"Manage your trading data and privacy settings"})]}),(0,r.jsx)(l.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(i.$,{variant:"outline",className:"w-full justify-start",children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Export Trading Data"]}),(0,r.jsxs)(i.$,{variant:"outline",className:"w-full justify-start text-destructive",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Delete All Data"]})]})})]})]}),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{children:[(0,r.jsx)(l.ZB,{children:"Advanced Settings"}),(0,r.jsx)(l.BT,{children:"Advanced configuration options for power users"})]}),(0,r.jsxs)(l.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"apiKey",children:"Zerodha API Key"}),(0,r.jsx)(n.p,{id:"apiKey",type:"password",placeholder:"Enter your Zerodha API key"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.J,{htmlFor:"apiSecret",children:"Zerodha API Secret"}),(0,r.jsx)(n.p,{id:"apiSecret",type:"password",placeholder:"Enter your Zerodha API secret"})]})]}),(0,r.jsx)(i.$,{variant:"outline",className:"w-full",children:"Connect Zerodha Account"})]})]})]})}},8979:(e,s,a)=>{"use strict";a.d(s,{J:()=>o});var r=a(5155),t=a(2115),l=a(3655),i=t.forwardRef((e,s)=>(0,r.jsx)(l.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=a(2085),d=a(9434);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(i,{ref:s,className:(0,d.cn)(c(),a),...t})});o.displayName=i.displayName},9434:(e,s,a)=>{"use strict";a.d(s,{cn:()=>l});var r=a(2596),t=a(9688);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,t.QP)((0,r.$)(s))}}},e=>{e.O(0,[879,204,441,964,358],()=>e(e.s=334)),_N_E=e.O()}]);