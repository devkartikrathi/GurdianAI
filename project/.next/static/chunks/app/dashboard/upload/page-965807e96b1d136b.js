(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{1089:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>h});var t=s(5155),a=s(2115),l=s(1046),d=s(6695),c=s(4944),n=s(646),i=s(5339),o=s(9869),m=s(7434),x=s(408),u=s.n(x);function h(){let[e,r]=(0,a.useState)(0),[s,x]=(0,a.useState)("idle"),[h,f]=(0,a.useState)(""),[p,j]=(0,a.useState)([]),N=(0,a.useCallback)(async e=>{let s=e[0];if(!s)return;x("uploading"),r(0),f("Processing CSV file...");let t=setInterval(()=>{r(e=>e>=90?(clearInterval(t),90):e+10)},200);try{let e=await s.text();u().parse(e,{header:!0,complete:async e=>{j(e.data);let a=new FormData;a.append("file",s);let l=await fetch("/api/trades/upload",{method:"POST",body:a});if(clearInterval(t),r(100),l.ok){let e=await l.json();x("success"),f("Successfully uploaded ".concat(e.total_trades," trades"))}else{let e=await l.json();x("error"),f(e.error||"Upload failed")}},error:e=>{clearInterval(t),x("error"),f("CSV parsing error: ".concat(e.message))}})}catch(e){clearInterval(t),x("error"),f("Failed to process file")}},[]),{getRootProps:g,getInputProps:y,isDragActive:v}=(0,l.VB)({onDrop:N,accept:{"text/csv":[".csv"],"application/vnd.ms-excel":[".csv"]},multiple:!1});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Upload Trades"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Upload your trade data in CSV format for analysis"})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsxs)(d.aR,{children:[(0,t.jsxs)(d.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Trade Data Upload"]}),(0,t.jsx)(d.BT,{children:"Drag and drop your CSV file here, or click to browse"})]}),(0,t.jsxs)(d.Wu,{children:[(0,t.jsxs)("div",{...g(),className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(v?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 hover:bg-muted/50"),children:[(0,t.jsx)("input",{...y()}),(0,t.jsx)(o.A,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-lg font-medium text-foreground mb-2",children:v?"Drop the file here":"Drag & drop a CSV file here"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"or click to select a file"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported format: CSV with columns for symbol, trade type, quantity, price, and date/time"})]}),"idle"!==s&&(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(()=>{switch(s){case"success":return(0,t.jsx)(n.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"});case"error":return(0,t.jsx)(i.A,{className:"h-6 w-6 text-red-600 dark:text-red-400"});default:return(0,t.jsx)(o.A,{className:"h-6 w-6 text-muted-foreground"})}})(),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:h})]}),"uploading"===s&&(0,t.jsx)(c.k,{value:e,className:"h-2"}),p.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-foreground mb-2",children:["Preview (",p.length," rows)"]}),(0,t.jsx)("div",{className:"max-h-40 overflow-y-auto border rounded-md",children:(0,t.jsxs)("table",{className:"w-full text-xs",children:[(0,t.jsx)("thead",{className:"bg-muted/50",children:(0,t.jsx)("tr",{children:Object.keys(p[0]||{}).map(e=>(0,t.jsx)("th",{className:"px-2 py-1 text-left font-medium",children:e},e))})}),(0,t.jsx)("tbody",{children:p.slice(0,5).map((e,r)=>(0,t.jsx)("tr",{className:"border-t",children:Object.values(e).map((e,r)=>(0,t.jsx)("td",{className:"px-2 py-1",children:String(e)},r))},r))})]})})]})]})]})]}),(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Upload Guidelines"})}),(0,t.jsx)(d.Wu,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Required Columns"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"• Symbol/Stock name"}),(0,t.jsx)("li",{children:"• Trade type (BUY/SELL)"}),(0,t.jsx)("li",{children:"• Quantity"}),(0,t.jsx)("li",{children:"• Price"}),(0,t.jsx)("li",{children:"• Date and time"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Supported Formats"}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"• CSV files (.csv)"}),(0,t.jsx)("li",{children:"• Excel exports"}),(0,t.jsx)("li",{children:"• Broker statements"}),(0,t.jsx)("li",{children:"• Custom trade logs"})]})]})]})})]})]})}},2622:(e,r,s)=>{Promise.resolve().then(s.bind(s,1089))},4944:(e,r,s)=>{"use strict";s.d(r,{k:()=>c});var t=s(5155),a=s(2115),l=s(5863),d=s(9434);let c=a.forwardRef((e,r)=>{let{className:s,value:a,...c}=e;return(0,t.jsx)(l.Root,{ref:r,className:(0,d.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...c,children:(0,t.jsx)(l.Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});c.displayName=l.Root.displayName},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>i,Wu:()=>o,ZB:()=>n,Zp:()=>d,aR:()=>c});var t=s(5155),a=s(2115),l=s(9434);let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});d.displayName="Card";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});c.displayName="CardHeader";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});i.displayName="CardDescription";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>l});var t=s(2596),a=s(9688);function l(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{e.O(0,[204,897,839,441,964,358],()=>e(e.s=2622)),_N_E=e.O()}]);